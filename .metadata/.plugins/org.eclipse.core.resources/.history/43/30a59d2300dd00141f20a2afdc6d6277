package edu.nju.software.util;

import net.sf.ehcache.Cache;
import net.sf.ehcache.CacheManager;
import net.sf.ehcache.Element;
import net.sf.ehcache.config.Configuration;


public class CoCacheManager {
	private static final String DEFAULT_KEY_NAME = "co_platform_cache";
	private static Cache cache = null;
	
	public static Cache initCache() {
		CacheManager cahcCacheMaanager = new CacheManager();
		int maxEntries = 100000;
		int ttl = 3600;
		int tti = 3600;
		Cache cache = new Cache(DEFAULT_KEY_NAME, maxEntries, false, false, ttl, tti);
		cahcCacheMaanager.addCache(cache);
		return cahcCacheMaanager.getCache(DEFAULT_KEY_NAME);
	}
	
	public static void put(String key, Object value) {
		if(null == cache) {
			cache = initCache();
		}
		cache.put(new Element(key, value));
	}
	
	public static Object get(String key) {
		if(null == cache) {
			return null;
		}
		
		Element element = (Element) cache.get(key);
		if(null != element) {
			return element.getObjectValue();
		}else {
			return null;
		}
	}
	
	public static void remove(String key) {
		if(null == cache) {
			return;
		}
		cache.remove(key);
	}
}
